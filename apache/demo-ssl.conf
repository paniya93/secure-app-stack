<VirtualHost *:443>
  ServerName demo.example.com
  DocumentRoot /var/www/demo

  OIDCProviderMetadataURL https://keycloak.example.com/realms/demo/.well-known/openid-configuration
  OIDCClientID demo-app
  OIDCClientSecret <your-secret>
  OIDCRedirectURI https://demo.example.com/oidc/callback
  OIDCCryptoPassphrase SomeRandomString
  OIDCRemoteUserClaim preferred_username

  <Location />
    AuthType openid-connect
    Require valid-user
  </Location>

  ErrorLog ${APACHE_LOG_DIR}/demo_ssl_error.log
  CustomLog ${APACHE_LOG_DIR}/demo_ssl_access.log combined

  SSLEngine on
  SSLCertificateFile /etc/letsencrypt/live/demo.example.com/fullchain.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/demo.example.com/privkey.pem
  Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
